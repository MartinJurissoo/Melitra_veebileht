<!DOCTYPE html>
<html lang="et">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Melitra - Radio Control Systems</title>
    <meta name="description" content="Professional radio control systems for industrial applications" />
    <link href="css/StyleMain.css" rel="stylesheet"/>
</head>

<body>
    <header>
        <div class="logo-group">
            <img src="img/Melitra.png" alt="Melitra" class="logo melitra-logo" onerror="this.style.display='none'">
            <span class="partner-text" data-translate="partner_text">partners with</span>
            <img src="img/teleradio.png" alt="Teleradio" class="logo teleradio-logo" onerror="this.style.display='none'">
        </div>

        <nav>
            <a href="#home" data-translate="nav_home">Home</a>
            <a href="#products" data-translate="nav_products">Products</a>
            <a href="#about-us" data-translate="nav_about">About Us</a>
            <a href="#contact" data-translate="nav_contact">Contact</a>
        </nav>

        <div class="language-switcher">
            <button class="lang-btn active" onclick="changeLanguage('en')">ENG</button>
            <button class="lang-btn" onclick="changeLanguage('et')">EST</button>
        </div>
    </header>

    <div class="hero-section" id="home">
        <div class="hero-content">
            <h1 data-translate="hero_title">Radio Control Excellence</h1>
            <p data-translate="hero_subtitle">Innovation in wireless technology for over 60 years</p>
        </div>
    </div>
    
    <section id="products">
        <h2 data-translate="products_title">Our Products</h2>
        <div class="product-grid" id="product-container">
            <!-- Products will be loaded dynamically here -->
        </div>
    </section>

    <!-- Product Detail Modal -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalProductName"></h2>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <span id="modalCategory" class="product-category"></span>
                
                <div id="modalImage" class="product-detail-image"></div>
                <p id="modalDescription" class="product-description-full"></p>
                
                <div class="models-section" id="modelsSection">
                    <h3 id="modelsTitle"></h3>
                    <div id="modelsList" class="model-list"></div>
                </div>
            </div>
        </div>
    </div>

    <section id="about-us">
        <h2 data-translate="about_title">About Us</h2>
        <div class="about-content">
            <h3 data-translate="about_heading1">We have developed radio control systems for more than 60 years</h3>
            <div class="about-text" data-translate="about_text1">
                Tele Radio has been at the forefront of wireless control technology since our founding. We specialize in developing innovative radio remote control systems that enhance safety, efficiency, and productivity across various industries worldwide.
            </div>

            <div class="highlight-box">
                <h3 data-translate="about_heading2">We do our own research and development</h3>
                <div class="about-text" data-translate="about_text2">
                    Our commitment to innovation drives us to continuously improve our products. With our own dedicated R&D department, we stay ahead of market demands and technological advancements, ensuring that our customers always have access to the most advanced control solutions available.
                </div>
            </div>

            <h3 data-translate="about_heading3">Quality and Safety First</h3>
            <div class="about-text" data-translate="about_text3">
                Every product we manufacture undergoes rigorous testing and quality control processes. We are ISO certified and comply with international safety standards, giving our customers confidence in the reliability and safety of our systems.
            </div>

            <h3 data-translate="about_heading4">Global Presence, Local Service</h3>
            <div class="about-text" data-translate="about_text4">
                With partners and distributors around the world, we provide local support backed by global expertise. Our team is committed to delivering exceptional service and support throughout the entire lifecycle of our products.
            </div>
        </div>
    </section>

    <section id="contact">
        <h2 data-translate="contact_title">Contact Us</h2>
        <div class="contact-container">
            <div class="contact-info">
                <div class="contact-item">
                    <div class="contact-icon">‚úâ</div>
                    <div class="contact-details">
                        <h4 data-translate="contact_email">Email</h4>
                        <p>melitraestonia@gmail.com</p>
                    </div>
                </div>

                <div class="contact-item">
                    <div class="contact-icon">üìû</div>
                    <div class="contact-details">
                        <h4 data-translate="contact_phone">Phone</h4>
                        <p>+372 502 0092</p>
                    </div>
                </div>

                <div class="contact-item">
                    <div class="contact-icon">üìç</div>
                    <div class="contact-details">
                        <h4 data-translate="contact_location">Location</h4>
                        <p>P√§rnu, Eesti</p>
                    </div>
                </div>
            </div>

            <div class="contact-form">
                <form>
                    <div class="form-group">
                        <label for="name" data-translate="form_name">Name</label>
                        <input type="text" id="name" name="name" data-translate-placeholder="form_name_placeholder" placeholder="Your name" required>
                    </div>

                    <div class="form-group">
                        <label for="email" data-translate="form_email">Email</label>
                        <input type="email" id="email" name="email" placeholder="your@email.com" required>
                    </div>

                    <div class="form-group">
                        <label for="message" data-translate="form_message">Message</label>
                        <textarea id="message" name="message" data-translate-placeholder="form_message_placeholder" placeholder="How can we help you?" required></textarea>
                    </div>

                    <button type="submit" class="submit-btn" data-translate="form_submit">Send Message</button>
                </form>
            </div>
        </div>
    </section>

    <footer>
        <p data-translate="footer_text">&copy; 2026 Melitra. All rights reserved.</p>
    </footer>

    <script>
        // Product data
        let productsData = [];
        let currentLanguage = 'en';

        // Translation dictionary
        const translations = {
            en: {
                nav_home: "Home",
                nav_products: "Products",
                nav_about: "About Us",
                nav_contact: "Contact",
                hero_title: "Radio Control Excellence",
                hero_subtitle: "Innovation in wireless technology for over 60 years",
                products_title: "Our Products",
                learn_more: "Learn More",
                about_title: "About Us",
                about_heading1: "We have developed radio control systems for more than 60 years",
                about_text1: "Tele Radio has been at the forefront of wireless control technology since our founding. We specialize in developing innovative radio remote control systems that enhance safety, efficiency, and productivity across various industries worldwide.",
                about_heading2: "We do our own research and development",
                about_text2: "Our commitment to innovation drives us to continuously improve our products. With our own dedicated R&D department, we stay ahead of market demands and technological advancements, ensuring that our customers always have access to the most advanced control solutions available.",
                about_heading3: "Quality and Safety First",
                about_text3: "Every product we manufacture undergoes rigorous testing and quality control processes. We are ISO certified and comply with international safety standards, giving our customers confidence in the reliability and safety of our systems.",
                about_heading4: "Global Presence, Local Service",
                about_text4: "With partners and distributors around the world, we provide local support backed by global expertise. Our team is committed to delivering exceptional service and support throughout the entire lifecycle of our products.",
                contact_title: "Contact Us",
                contact_email: "Email",
                contact_phone: "Phone",
                contact_location: "Location",
                form_name: "Name",
                form_name_placeholder: "Your name",
                form_email: "Email",
                form_message: "Message",
                form_message_placeholder: "How can we help you?",
                form_submit: "Send Message",
                footer_text: "¬© 2024 Melitra. All rights reserved.",
                partner_text: "partners with",
                product_tiger: "Tiger G2",
                product_panther: "Panther",
                product_t20t60: "T20/T60 Series"
            },
            et: {
                nav_home: "Avaleht",
                nav_products: "Tooted",
                nav_about: "Meist",
                nav_contact: "Kontakt",
                hero_title: "Raadio Juhtimise Tipptase",
                hero_subtitle: "Uuenduslik juhtmeta tehnoloogia √ºle 60 aasta",
                products_title: "Meie Tooted",
                learn_more: "Loe Lisaks",
                about_title: "Meist",
                about_heading1: "Oleme arendanud raadio juhtimiss√ºsteeme √ºle 60 aasta",
                about_text1: "Tele Radio on olnud juhtmeta juhtimise tehnoloogia esirinnas alates meie asutamisest. Spetsialiseerume innovaatiliste raadio kaugjuhtimiss√ºsteemide v√§ljat√∂√∂tamisele, mis suurendavad ohutust, t√µhusust ja tootlikkust erinevates t√∂√∂stusharudes √ºle maailma.",
                about_heading2: "Teeme oma teadus- ja arendust√∂√∂d",
                about_text2: "Meie p√ºhendumus innovatsioonile ajendab meid pidevalt oma tooteid t√§iustama. Oma p√ºhendunud teadus- ja arendusosakonnaga oleme turun√µudlustest ja tehnoloogilistest edusammudest ees, tagades, et meie klientidel on alati juurdep√§√§s k√µige arenenumatele juhtimislahendustele.",
                about_heading3: "Kvaliteet ja Ohutus Esikohal",
                about_text3: "Iga meie toodetud toode l√§bib range testimise ja kvaliteedikontrolli protsessid. Oleme ISO sertifitseeritud ja vastame rahvusvahelistele ohutusstandarditele, andes meie klientidele kindlustunde meie s√ºsteemide usaldusv√§√§rsuses ja ohutuses.",
                about_heading4: "√úlemaailmne Kohalolek, Kohalik Teenindus",
                about_text4: "Partnerite ja turustajatega √ºle maailma pakume kohalikku tuge, mida toetab √ºlemaailmne ekspertiis. Meie meeskond on p√ºhendunud erakordse teeninduse ja toe pakkumisele kogu meie toodete eluts√ºkli jooksul.",
                contact_title: "V√µta √úhendust",
                contact_email: "E-post",
                contact_phone: "Telefon",
                contact_location: "Asukoht",
                form_name: "Nimi",
                form_name_placeholder: "Teie nimi",
                form_email: "E-post",
                form_message: "S√µnum",
                form_message_placeholder: "Kuidas saame teid aidata?",
                form_submit: "Saada S√µnum",
                footer_text: "¬© 2024 Melitra. K√µik √µigused kaitstud.",
                partner_text: "koost√∂√∂partner",
                product_tiger: "Tiger G2",
                product_panther: "Panther",
                product_t20t60: "T20/T60 Seeria"
            }
        };

        // Open product modal with details
        function openProductModal(productId) {
            console.log('Opening modal for product:', productId);
            const product = productsData.find(p => p.id === productId);
            if (!product) {
                console.error('Product not found:', productId);
                return;
            }

            console.log('Product found:', product);
            console.log('Product has models:', product.models ? product.models.length : 0);

            const modal = document.getElementById('productModal');
            
            // Get translated product name
            let productName = product.name;
            if (product.id === 'tiger-g2') productName = translations[currentLanguage].product_tiger;
            if (product.id === 'panther') productName = translations[currentLanguage].product_panther;
            if (product.id === 't20-t60') productName = translations[currentLanguage].product_t20t60;
            
            document.getElementById('modalProductName').textContent = productName;
            document.getElementById('modalCategory').textContent = product.category ? product.category[currentLanguage] : '';
            
            const modalImage = document.getElementById('modalImage');
            modalImage.style.backgroundImage = `url('${product.image}')`;
            modalImage.innerHTML = '';
            
            document.getElementById('modalDescription').textContent = product.description[currentLanguage];
            
            if (product.models && product.models.length > 0) {
                document.getElementById('modelsSection').style.display = 'block';
                document.getElementById('modelsTitle').textContent = currentLanguage === 'en' ? 'Available Models' : 'Saadaolevad Mudelid';
                
                const modelsList = document.getElementById('modelsList');
                modelsList.innerHTML = '';
                product.models.forEach(model => {
                    const modelItem = document.createElement('div');
                    modelItem.className = 'model-item';
                    const description = model.description[currentLanguage] || model.description.en;
                    const hasImage = model.image ? true : false;
                    
                    // Translate model name
                    let modelName = model.name;
                    if (currentLanguage === 'et') {
                        modelName = modelName.replace(/Transmitter/g, 'Saatja');
                        modelName = modelName.replace(/Receiver/g, 'Vastuv√µtja');
                        modelName = modelName.replace(/buttons/g, 'nuppu');
                        modelName = modelName.replace(/button/g, 'nupp');
                        modelName = modelName.replace(/step/g, 'astmelist');
                        modelName = modelName.replace(/function relays/g, 'funktsiooni relee');
                    }
                    
                    // Build model header
                    let modelHTML = `
                        <div class="model-item-header">
                            ${hasImage ? `<div class="model-item-image" style="background-image: url('${model.image}')"></div>` : ''}
                            <div class="model-item-info">
                                <h4>${modelName}</h4>
                                <p>${description}</p>
                            </div>
                        </div>
                    `;
                    
                    // Build specifications table if model has specs
                    if (model.specifications) {
                        const specLabels = {
                            article_433: { en: 'Article number (433 MHz)', et: 'Artikli number (433 MHz)' },
                            article_915: { en: 'Article number (915 MHz)', et: 'Artikli number (915 MHz)' },
                            article: { en: 'Article number', et: 'Artikli number' },
                            frequency_433: { en: 'Frequency (433 MHz)', et: 'Sagedus (433 MHz)' },
                            frequency_915: { en: 'Frequency (915 MHz)', et: 'Sagedus (915 MHz)' },
                            frequency: { en: 'Frequency', et: 'Sagedus' },
                            battery: { en: 'Battery', et: 'Aku' },
                            protection: { en: 'Protection', et: 'Kaitse' },
                            certifications: { en: 'Certifications', et: 'Sertifikaadid' },
                            weight: { en: 'Weight', et: 'Kaal' },
                            dimensions: { en: 'Dimensions', et: 'M√µ√µtmed' },
                            temperature: { en: 'Temperature', et: 'Temperatuur' },
                            relays: { en: 'Relays', et: 'Relee' },
                            power: { en: 'Power', et: 'Toide' },
                            interface: { en: 'Interface', et: 'Liides' },
                            range: { en: 'Range', et: 'Ulatus' }
                        };
                        
                        // Function to translate spec values
                        function translateSpecValue(value) {
                            if (currentLanguage === 'en') return value;
                            
                            // Common translations
                            let translated = value;
                            translated = translated.replace(/channels/g, 'kanalit');
                            translated = translated.replace(/channel/g, 'kanal');
                            translated = translated.replace(/Re-chargeable/g, 'Taaslaetav');
                            translated = translated.replace(/rechargeable/gi, 'taaslaetav');
                            translated = translated.replace(/coin cell/g, 'm√ºndaku');
                            translated = translated.replace(/alkaline/gi, 'leeliseline');
                            translated = translated.replace(/worldwide/gi, '√ºlemaailmne');
                            translated = translated.replace(/open field/gi, 'avatud v√§li');
                            translated = translated.replace(/indoor/gi, 'siseruumides');
                            translated = translated.replace(/outdoor/gi, 'v√§listingimustes');
                            translated = translated.replace(/programmable/gi, 'programmeeritav');
                            translated = translated.replace(/changeover/gi, '√ºmberl√ºlitus');
                            translated = translated.replace(/function relays/gi, 'funktsiooni relee');
                            translated = translated.replace(/protocol/gi, 'protokoll');
                            translated = translated.replace(/certified/gi, 'sertifitseeritud');
                            translated = translated.replace(/ to /g, ' kuni ');
                            
                            // Model name translations
                            translated = translated.replace(/Transmitter/g, 'Saatja');
                            translated = translated.replace(/transmitter/g, 'saatja');
                            translated = translated.replace(/Receiver/g, 'Vastuv√µtja');
                            translated = translated.replace(/receiver/g, 'vastuv√µtja');
                            translated = translated.replace(/buttons/g, 'nuppu');
                            translated = translated.replace(/button/g, 'nupp');
                            translated = translated.replace(/step/g, 'astmelist');
                            
                            return translated;
                        }
                        
                        modelHTML += '<table class="model-specs-table"><tbody>';
                        Object.entries(model.specifications).forEach(([key, value]) => {
                            const label = specLabels[key] ? specLabels[key][currentLanguage] : key;
                            const translatedValue = typeof value === 'object' ? value[currentLanguage] : translateSpecValue(value);
                            modelHTML += `
                                <tr>
                                    <td class="model-spec-label">${label}</td>
                                    <td class="model-spec-value">${translatedValue}</td>
                                </tr>
                            `;
                        });
                        modelHTML += '</tbody></table>';
                    }
                    
                    modelItem.innerHTML = modelHTML;
                    modelsList.appendChild(modelItem);
                });
            } else {
                document.getElementById('modelsSection').style.display = 'none';
            }
            
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
            console.log('Modal should be visible now');
        }

        function closeModal() {
            const modal = document.getElementById('productModal');
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        async function loadProducts() {
            try {
                const response = await fetch('products.json');
                const data = await response.json();
                productsData = data.products;
                console.log('Products loaded:', productsData);
                renderProducts();
            } catch (error) {
                console.error('Error loading products:', error);
                productsData = [
                    {
                        id: "tiger-g2",
                        name: "Tiger G2",
                        image: "img/products/tiger-g2.jpg",
                        category: { en: "Industrial & Machines", et: "T√∂√∂stus ja Masinad" },
                        description: {
                            en: "Advanced radio remote control system designed for demanding industrial applications.",
                            et: "T√§iustatud raadio kaugjuhtimiss√ºsteem, mis on loodud n√µudlikeks t√∂√∂stusrakendusteks."
                        },
                        models: [],
                        features: { en: [], et: [] },
                        specifications: {}
                    },
                    {
                        id: "panther",
                        name: "Panther",
                        image: "img/products/panther.jpg",
                        category: { en: "Mobile & Hydraulic", et: "Mobiilne ja H√ºdraulika" },
                        description: {
                            en: "Compact and powerful control system perfect for mobile and hydraulic applications.",
                            et: "Kompaktne ja v√µimas juhtimiss√ºsteem mobiil- ja h√ºdraulikarakendustele."
                        },
                        models: [],
                        features: { en: [], et: [] },
                        specifications: {}
                    },
                    {
                        id: "t20-t60",
                        name: "T20/T60 Series",
                        image: "img/products/t20-t60.jpg",
                        category: { en: "Lifting & Cranes", et: "T√µstmine ja Kraanid" },
                        description: {
                            en: "Versatile control solutions for cranes and lifting equipment.",
                            et: "Mitmek√ºlgsed juhtimislahendused kraanidele ja t√µsteseadmetele."
                        },
                        models: [],
                        features: { en: [], et: [] },
                        specifications: {}
                    }
                ];
                console.log('Using fallback products');
                renderProducts();
            }
        }

        function renderProducts() {
            const container = document.getElementById('product-container');
            container.innerHTML = '';
            console.log('Rendering products:', productsData);

            productsData.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                
                // Get translated product name
                let productName = product.name;
                if (product.id === 'tiger-g2') productName = translations[currentLanguage].product_tiger;
                if (product.id === 'panther') productName = translations[currentLanguage].product_panther;
                if (product.id === 't20-t60') productName = translations[currentLanguage].product_t20t60;
                
                productCard.innerHTML = `
                    <div class="product-image" style="background-image: url('${product.image}');">
                    </div>
                    <div class="product-info">
                        <h3>${productName}</h3>
                        <p class="product-description" data-product-id="${product.id}">${product.description[currentLanguage]}</p>
                        <button class="product-btn" data-translate="learn_more" data-product-id="${product.id}">${translations[currentLanguage].learn_more}</button>
                    </div>
                `;
                container.appendChild(productCard);
            });

            document.querySelectorAll('.product-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    const productId = this.getAttribute('data-product-id');
                    console.log('Button clicked, product ID:', productId);
                    openProductModal(productId);
                });
            });
        }

        function changeLanguage(lang) {
            currentLanguage = lang;
            
            document.querySelectorAll('[data-translate]').forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });

            document.querySelectorAll('.product-description').forEach(element => {
                const productId = element.getAttribute('data-product-id');
                const product = productsData.find(p => p.id === productId);
                if (product) {
                    element.textContent = product.description[lang];
                }
            });
            
            // Update product names on cards
            document.querySelectorAll('.product-card').forEach((card, index) => {
                const product = productsData[index];
                if (product) {
                    let productName = product.name;
                    if (product.id === 'tiger-g2') productName = translations[lang].product_tiger;
                    if (product.id === 'panther') productName = translations[lang].product_panther;
                    if (product.id === 't20-t60') productName = translations[lang].product_t20t60;
                    
                    const h3 = card.querySelector('h3');
                    const imageSpan = card.querySelector('.product-image span');
                    if (h3) h3.textContent = productName;
                    if (imageSpan) imageSpan.textContent = productName;
                }
            });

            document.querySelectorAll('[data-translate-placeholder]').forEach(element => {
                const key = element.getAttribute('data-translate-placeholder');
                if (translations[lang][key]) {
                    element.placeholder = translations[lang][key];
                }
            });

            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            localStorage.setItem('preferred-language', lang);
        }

        window.addEventListener('DOMContentLoaded', () => {
            loadProducts();
            
            const savedLang = localStorage.getItem('preferred-language') || 'en';
            currentLanguage = savedLang;
            if (savedLang === 'et') {
                document.querySelectorAll('.lang-btn').forEach(btn => {
                    btn.classList.remove('active');
                    if (btn.textContent === 'EST') {
                        btn.classList.add('active');
                    }
                });
            }

            document.getElementById('productModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeModal();
                }
            });

            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeModal();
                }
            });
        });
    </script>
</body>
</html>